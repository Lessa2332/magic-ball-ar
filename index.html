<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Магічна куля AR</title>

<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar/dist/mindar-image-aframe.prod.js"></script>

<style>
body, html { margin:0; padding:0; overflow:hidden; font-family: 'Segoe UI', sans-serif; height:100%; width:100%; }

/* AR-сцена на весь екран */
a-scene {
  position: fixed;
  top:0;
  left:0;
  width:100vw;
  height:100vh;
  z-index:1;
}

/* UI поверх сцени */
#uiContainer {
  position: fixed;
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  text-align: center;
  background: rgba(255,255,255,0.15);
  padding: 8px 12px;
  border-radius: 10px;
}

#nameInput {
  padding:8px; font-size:16px;
}

#predictButton {
  padding:8px 12px; font-size:16px; background:#0A1F44; color:#FFD700; border-radius:8px; margin-left:5px;
}

#signature {
  font-size:12px; color:#0A1F44; opacity:0.7; margin-top:2px;
}
</style>
</head>

<body>

<div id="uiContainer">
  <input id="nameInput" placeholder="Введи своє ім'я">
  <button id="predictButton">Магія ✨</button>
  <div id="signature">@SmartLessa - 2025</div>
</div>

<audio id="magicSound" src="./magic.mp3"></audio>

<a-scene mindar-image="imageTargetSrc: ./targets.mind;" embedded color-space="sRGB" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: true">
  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <a-entity mindar-image-target="targetIndex: 0">

    <!-- Напівпрозора магічна куля -->
    <a-sphere id="magicSphere" position="0 0.5 0" radius="0.05" color="#0A1F44" opacity="0" segments-width="32" segments-height="32"
              metalness="0.2" roughness="0.3" emissive="#FFD700" emissiveIntensity="0.8">
      <!-- Анімація появи та обертання -->
      <a-animation attribute="scale" from="0 0 0" to="1 1 1" dur="1000" begin="showSphere"></a-animation>
      <a-animation attribute="opacity" from="0" to="0.5" dur="1000" begin="showSphere"></a-animation>
      <a-animation attribute="rotation" to="0 360 0" dur="8000" repeat="indefinite" easing="linear"></a-animation>
    </a-sphere>

    <!-- Текст всередині кулі -->
    <a-text id="arText" value="" color="#FFD700" align="center" position="0 0.5 0.11" width="0.8" opacity="0">
      <a-animation attribute="opacity" from="0" to="1" dur="1000" begin="showText"></a-animation>
    </a-text>

    <!-- Мерехтливі зірочки -->
    <a-entity id="stars" position="0 0.5 0">
      <a-sphere v-for="i in 15" position="0 0 0" radius="0.02" color="#FFD700"
        animation__blink="property: material.color; dir: alternate; dur: 800; loop: true; to: #FF69B4"></a-sphere>
    </a-entity>

  </a-entity>
</a-scene>

<script>
const schoolName = "Чорноморський ліцей 6";
const className = "4-Б";
const wishes = [
  "Сьогодні твій день для нових друзів!",
  "Усмішка робить навчання веселішим!",
  "Кожна буква – крок до нових пригод!",
  "Ти маленький чарівник у великій школі!",
  "Кожен день приносить нові ідеї!",
  "Твоє серце світиться щастям!",
  "Грай і вчися одночасно – це магія!",
  "Ти зможеш все, що задумав!",
  "Усмішка допомагає вчитися легко!",
  "Кожна книжка – скарб знань!",
  "Твоя фантазія робить день яскравим!",
  "Ти чарівник своїх успіхів!",
  "Завтра буде ще цікавіше!",
  "Сміливо мрій і відкривай нове!",
  "Ти робиш цей світ яскравішим!"
];

const inputName = document.getElementById('nameInput');
const button = document.getElementById('predictButton');
const arText = document.getElementById('arText');
const sphere = document.getElementById('magicSphere');
const sound = document.getElementById('magicSound');

button.addEventListener('click', () => {
  // Програємо звук
  sound.currentTime = 0;
  sound.play();

  const name = inputName.value || "Друг";
  const wish = wishes[Math.floor(Math.random() * wishes.length)];
  const message = `Привіт, ${name}!\nМагічна куля ${schoolName} має для тебе побажання ✨\n${wish}`;
  
  // Встановлюємо текст
  arText.setAttribute('value', message);

  // Запускаємо анімації появи кулі та тексту
  sphere.emit('showSphere');
  arText.emit('showText');
});
</script>

</body>
</html>
